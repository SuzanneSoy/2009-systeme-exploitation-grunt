#include <module.h>
#include <types.h>
#include <interfaceUtilisateur/police/police.h>
#include <demarrage/multiboot/multiboot.h>
#include <pc/vesaGraphique/vesaGraphique.h>

MODULE(Police);

DEPENDANCE_MODULE(Police, Multiboot);
// DEPENDANCE_MODULE(Police, VesaGraphique);

extern EtatMultiboot* etatMultiboot;

void initPolice (void** etat) {
	*etat = etatPolice;
	
	etatPolice->tableCaracteres = etatMultiboot->InfoMultiboot->modsAddr[0].modStart;
}

void deinitPolice (void** etat) {
	*etat = NULL;
}

void policeAfficherCaractereCouleurPosition(char caractere, uint32 couleurAv, uint32 couleurAr, uint32 x, uint32 y) {
	int i, j;
	for (i = 0; i < 15; i++)
		for (j = 0; j < 8; j++)
			if ((etatPolice->tableCaracteres[(uint8)caractere * 15 + i] >> j) & 1)
				setPixel32(x + 8 - j, y + i, couleurAv);
			else
				setPixel32(x + 8 - j, y + i, couleurAr);
}

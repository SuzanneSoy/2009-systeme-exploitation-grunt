VIDE =

# Couleurs
COULEUR = [$(1)m
COULEUR_AUCUNE      = $(call COULEUR,)
COULEUR_BLEU_CLAIR  = $(call COULEUR,1;34)
COULEUR_VERT_CLAIR  = $(call COULEUR,1;32)
COULEUR_GRIS        = $(call COULEUR,1;30)
COULEUR_JAUNE_CLAIR = $(call COULEUR,1;33)
COULEUR_VERT_FONCE  = $(call COULEUR,0;32)

COULEUR_SOURCE = $(COULEUR_BLEU_CLAIR)
COULEUR_DEST   = $(COULEUR_VERT_FONCE)
COULEUR_TAG    = $(COULEUR_GRIS)
COULEUR_TAG_CC = $(COULEUR_VERT_FONCE)
COULEUR_TAG_AS = $(COULEUR_TAG_CC)
COULEUR_TAG_LD = $(COULEUR_BLEU_CLAIR)
COULEUR_TAG_CD = $(COULEUR_JAUNE_CLAIR)
COULEUR_TAG_TT = $(COULEUR_VERT_CLAIR)

# Apparence
FORMAT_TAG    = $(COULEUR_TAG)[$(call COULEUR_TAG_$(1))$(1)$(COULEUR_TAG)]$(COULEUR_AUCUNE) $(VIDE)
FORMAT_FLECHE = $(VIDE) <- $(VIDE)
FORMAT_SOURCE = $(COULEUR_SOURCE)$(call FORMAT_CHEMIN,$(1))$(COULEUR_AUCUNE)
FORMAT_DEST   = $(COULEUR_DEST)$(call FORMAT_CHEMIN,$(1))$(COULEUR_AUCUNE)

FORMAT_CHEMIN = $(subst //,/,$(1))

FORMAT_ACTION_1 = $(call FORMAT_TAG,$(1))$(call FORMAT_DEST,$(2))
FORMAT_ACTION_2 = $(call FORMAT_ACTION_1,$(1),$(3))$(FORMAT_FLECHE)$(call FORMAT_SOURCE,$(2))

# Fonctions d'affichage
AFFICHE = echo "$(1)"

AFFICHE_ACTION = $(call AFFICHE,$(call FORMAT_ACTION_$(1),$(2),$(3),$(4)))

AFFICHE_CC = $(call AFFICHE_ACTION,2,CC,$(1),$(notdir $(2)))
AFFICHE_AS = $(call AFFICHE_ACTION,2,AS,$(1),$(notdir $(2)))
AFFICHE_FN = $(call AFFICHE_ACTION,2,FN,$(1),$(notdir $(2)))
AFFICHE_LD = $(call AFFICHE_ACTION,2,LD,$(notdir $(1)),$(notdir $(2)))
AFFICHE_CD = $(call AFFICHE_ACTION,1,CD,$(1))
AFFICHE_TT = $(call AFFICHE_ACTION,1,TT,$(1))
